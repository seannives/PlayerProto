<!DOCTYPE html>
<html>
    <head>
 	<title class="setTitle"></title>
	<meta content="width=device-width, initial-scale=1.0" name="viewport">
	<meta content="eCourses Author, Title" name="description">
    <!-- Bootstrap -->
    <link href="css/bootstrap_eCourses_customized.css" rel="stylesheet" media="screen">
	<link href="css/bootstrap_eCourses_responsive.css" rel="stylesheet" media="screen">
	<link href="css/graphics_and_svg.css" rel="stylesheet">
	<link href="css/learning-objective.css" rel="stylesheet">
	<link href="css/eCourse-master.css" rel="stylesheet" media="screen">
    </head>
	<body>
		<div class="titler">
			<span class='number setId'></span>
			<span class="setTitle">Test Cases for Labels Graph</span>
		</div>
	<div class="container-fluid">
		<div class="row-fluid">
			<div class="span6 leftCol">
				<div id="widgetTarget0"><p>0. Single image with labels</p></div>
				<div id="widgetTarget1"><p>1. Graph with labels</p></div>
				<div id="widgetTarget2"><p>2. Carousel with callouts (events)</p>
                </div>
				<div id="callOutHere"></div>
			</div>
			<div class="span6 rightCol">
				<div id="widgetTarget50"><p>3. Label positions</p></div>
				<div id="Endocrine"><p>4. Labels fire callouts</p>
                </div><p id="endoCall"></p>
                <div id="lineMarks"><p>5. x-axis Line Markers x and y</p></div>
                 <div id="lineMarks1"><p>6. x-axis Line Markers just x</p></div>
			</div>
		</div>
	</div>

	<script src="js/jquery-latest.js"></script>
	<script src="js/toc-structure.js"></script>    
	<script src="js/eCourse-master.js"></script>    
	<script src="js/d3.v2.min.js"></script>
	<script src="js/widgets.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/eventmanager.js"></script>
<script>

	var eventManager = new EventManager();

var birth = [
		{x: 0,	y: 2.0	},
		{x: 1,	y: 1.95},
		{ x: 2,	 y: 1.9 },
		 { x: 3, y: 1.85 },
		 { x: 4, y: 1.9	 },
		 { x: 5, y: 1.95 },
		 { x: 6, y: 2.0	 },
		 { x: 7, y: 1.95 },
		 { x: 8, y: 1.9	 },
		 { x: 9, y: 1.85 },
		 { x: 10, y: 1.9 },
		 { x: 11, y: 1.95},
		 { x: 12, y: 2.0 },
		 { x: 13, y: 1.95 },
		 { x: 14, y: 1.9 },
		 { x: 15, y: 1.85 },
		 { x: 16, y: 1.9 },
		 { x: 17, y: 1.95 },
		 { x: 18, y: 1.96 },
		 { x: 19, y: 1.95 },
		 { x: 20, y: 1.94 },
		 { x: 21, y: 1.93 },
		 { x: 22, y: 1.94 },
		 { x: 23, y: 1.95 },
		 { x: 24, y: 1.94 },
		 { x: 25, y: 1.93 },
		 { x: 26, y: 1.8 },
		 { x: 27, y: 1.7 },
		 { x: 28, y: 1.6 },
		 { x: 29, y: 1.5 },
		 { x: 30, y: 1.4 },
		 { x: 31, y: 1.3 },
		 { x: 32, y: 1.2 },
		 { x: 33, y: 1.1 },
		 { x: 34, y: 1.0 },
		 { x: 35, y: 0.9 },
		 { x: 36, y: 0.8 },
		 { x: 37, y: 0.7 },
		 { x: 38, y: 0.6 },
		 { x: 39, y: .5 },
		 { x: 40, y: 0.4 },
		 { x: 41, y: 0.35 },
		 { x: 42, y: 0.35 },
		 { x: 43, y: 0.34 },
		 { x: 44, y: 0.33 },
		 { x: 45, y: 0.33 },
		 { x: 46, y: 0.32 },
		 { x: 47, y: 0.33 },
		 { x: 48, y: 0.31 },
		 { x: 49, y: 0.29 },
		 { x: 50, y: .25 },
		 { x: 51, y: .198 },
		 { x: 52, y: 0.2 },
		 { x: 53, y: 0.19 },
		 { x: 54, y: 0.18 },
		 { x: 55, y: 0.175 },
		 { x: 56, y: 0.172 },
		 { x: 57, y: 0.16 },
		 { x: 58, y: 0.155 },
		 { x: 59, y: 0.153 },
		 { x: 60, y: 0.151 },
		 { x: 61, y: 0.15 },
		 { x: 62, y: .145 },
		 { x: 63, y: 0.145 },
		 { x: 64, y: 0.15 },
		 { x: 65, y: 0.145 }];
 
var death = [
		{x: 0,	y: 1.95	},
		{x: 1,	y: 1.95	},
		{ x: 2,	 y: 1.98 },
		 { x: 3, y: 1.95 },
		 { x: 4, y: 1.95 },
		 { x: 5, y: 1.98 },
		 { x: 6, y: 1.95 },
		 { x: 7, y: 1.88 },
		 { x: 8, y:  1.85 },
		 { x: 9, y: 1.85 },
		 { x: 10, y: 1.84 },
		 { x: 11, y: 1.8 },
		 { x: 12, y: 1.7 },
		 { x: 13, y: 1.6 },
		 { x: 14, y: 1.5 },
		 { x: 15, y: 1.4 },
		 { x: 16, y: 1.3 },
		 { x: 17, y: 1.2 },
		 { x: 18, y: 1.1 },
		 { x: 19, y: 0.9 },
		 { x: 20, y: 0.8 },
		 { x: 21, y: 0.7 },
		 { x: 22, y: 0.55 },
		 { x: 23, y: 0.45 },
		 { x: 24, y: 0.35 },
		 { x: 25, y: 0.2 },
		 { x: 26, y: 0.195 },
		 { x: 27, y: 0.19 },
		 { x: 28, y: 0.18 },
		 { x: 29, y: 0.19 },
		 { x: 30, y:  0.195},
		 { x: 31, y: 0.2},
		 { x: 32, y: 0.195},
		 { x: 33, y: 0.19},
		 { x: 34, y: 0.195 },
		 { x: 35, y: 0.198 },
		 { x: 36, y: 0.2 },
		 { x: 37, y: 0.2 },
		 { x: 38, y: 0.19 },
		 { x: 39, y: 0.18 },
		 { x: 40, y: 0.19},
		 { x: 41, y: 0.195},
		 { x: 42, y: 0.2},
		 { x: 43, y: 0.195},
		 { x: 44,
		 y: 0.198
		 },
		 { x: 45,
		 y: 0.2
		 },
		 { x: 46,
		 y: 0.2
		 },
		 { x: 47,
		 y: 0.195
		 },
		 { x: 48,
		 y: 0.192
		 },
		 { x: 49,
		 y: 0.192
		 },
		 { x: 50,
		 y: .19
		 },
		 { x: 51,
		 y: .198
		 },
		 { x: 52,
		 y: 0.2
		 },
		 { x: 53,
		 y: 0.19
		 },
		 { x: 54, y: 0.18
		 },
		 { x: 55, y: 0.198	 },
		 { x: 56, y: 0.195	 },
		 { x: 57,	 y: 0.2	 },
		 { x: 58,	 y: 0.19	 },
		 { x: 59,	 y: 0.195	 },
		 { x: 60,	 y: 0.198	 },
		 { x: 61,	 y: 0.193},
		 { x: 62,	 y: .145	 },
		 { x: 63,	 y: 0.192		 },
		 { x: 64,	 y: 0.198	 },
		 { x: 65,	 y: 0.199	 }];
var dataPts = birth.length;
var popGrowth = [];
for(i=0;i<dataPts;i++){
		popGrowth[i] = {x: birth[i].x,
						y: birth[i].y - death[i].y};
		}
		
	
	//<div id="widgetTarget0"><p>0. Single bar graph</p></div>
	
	var svg0 = new MakeSVGContainer(
		{node: d3.select("#widgetTarget0"),
		maxWid: 400,
		maxHt: 300
		}
	);
	
	svg0.Axes({
		id: 0,
		xPosPerc: 0, yPosPerc:0, //top, left corner
		xPerc: 1, yPerc: 1,//full height and width
		xaxisType: "linear",
		xOrient: "bottom",
		xLabel: "caption",
		yaxisType: "linear",
		yOrient: "left",
	});
	
	svg0.ScalableImage(
		{images: [	
				{URI:'img/FG12_5_3.jpg', caption: "Examples of ecological footprints"}
			]
		}
	);
	
	svg0.Labels(
		{labels: 	
		  [	
			{content: "United States",	xyPos: [0,.2], width: 80	},
			{content: "European Union",	xyPos:[0.45,0.2], width: 100},
			{content: "Afghanistan", xyPos:[0.8,0.2], 
			//because I used the default Data, my scale on the image is
			//now 0 to 1, so I want this label to be 8/10 of the way across, 
			//and 1/5 from the bottom
			width: 60	},
			{content:"23 Acres/person",	xyPos:[0,1], width: 100},
			{content:"11.5 acres/person", xyPos:[0.45,.7], width: 100	},
			{content:"1 acre/ person", xyPos:[0.8,0.5], width: 60}
		  ],
		});
	
	
//	<div id="widgetTarget1"><p>1. Graph with Labels</p></div>
	var svg1 = new MakeSVGContainer(
		{node: d3.select("#widgetTarget1"),
		maxWid: 500,
		maxHt: 400
		}
	);
	svg1.Axes({
		xPosPerc: 0, yPosPerc:0, //top, left corner
		xPerc: 1, yPerc: 1,//full height and width
		Data: [birth,death,popGrowth, [{x:0,y:-0.5}]],
		xaxisType: "linear",
		xTicks: 0,
		xOrient: "bottom",
		xLabel: "Time",
		yaxisType: "linear",
		yTicks: 0,
		yOrient: "left",
	});
		
	svg1.AreaMarkers(
	{xBands:  [[0,14],[25,40],[50,65]]
		});
			
	svg1.LineGraph(
		{Data: [birth,death,popGrowth],
			type: "lines"
		}
	);

	svg1.Labels(
		{labels: 	
		  [	
			{content: "Pre-development", xyPos: [0,-.25], width: 100	},
			{content: "Developing",	xyPos:[14,-.25], width: 80},
			{content: "Modernizing", xyPos:[27,-.25], width: 80},
			{content:"Developed",	xyPos:[40,-.25], width: 70},
			{content:"Post-development", xyPos:[51,-.25], width: 100	},
		  ],
		liteKey: [10,20,30,40,50]
		});
		
	
	//	<div id="widgetTarget2"><p>Carousel with callouts (events)</p></div>
	
	var svg2 = new MakeSVGContainer(
		{node: d3.select("#widgetTarget2"),
		maxWid: 500,
		maxHt: 400
		}
	);

	svg2.Axes({
		xPosPerc: 0, yPosPerc:0,
		xPerc: 1, yPerc: 1,//full height and width
		xaxisType: "linear", yaxisType: "linear",
		xTicks: 0,
		xOrient: "bottom",
		yTicks: 0,
		yOrient: "left",
		xLabel: "caption",

	});


	var textchunks = new Callouts (
		{node: d3.select("#callOutHere"),
		textBits: 	
		  [	
			{content: "Chapter 2 LO: Describe Earth's orientation to and revolution around the Sun and explain how they cause seasons."
		},
			{content: "The thin veil of atmosphere includes relatively small percentages of gases such as carbon dioxide, methane, and water vapor absorb radiation emitted by Earth creating a greenhouse effect.",
			},
			{content: "The constant tilt and parallelism of Earth's axis as it revolves around the Sun creates the annual variation in day length and Earth's seasons.",
			},
			{content:"Heat is transferred by radiation, in the form of electromagnetic waves, conduction, which is caused by molecular collision, and convection, or molecular circulation. "	}
		  ],
		liteKey: [0,1,2,3]
		}

	);
	
	svg2.ScalableImage(
		{images: [
			{URI:'img/ch4_0_0.jpg', caption: "Earth's axis is tilted 23.5&deg; from perpendicular."},
			{URI:'img/ch4_0_1.png', caption: "Earth's atmosphere. &copy;NASA http://www.nasa.gov/ multimedia/imagegallery/ image_feature_1529.html"},
			{URI:'img/ch4_03.jpg', caption: "The seasons"},
			{URI:'img/ch4_0_2.jpg', caption: "Heat transfer mechanisms"}	
			]
		}
	);
	


	//	<div id="widgetTarget50"><p>Images in grid</p></div>


	var svg70 = new MakeSVGContainer(
		{node: d3.select("#widgetTarget50"),
		maxWid: 500,
		maxHt: 300
		}
	);
	svg70.Axes({
		xPosPerc: 0, yPosPerc:0,
		xPerc: 1, yPerc: 1,//full height and half width
		xaxisType: "linear", yaxisType: "linear",
		xOrient: "bottom",
		yOrient: "left",
		xLabel: "label placement"
	});

	svg70.Labels(
		{type: "numbered",
		labels: 	
		  [
		{content: "TOP left", xyPos: [0,1], width: 100	},
		{content: "middle left", xyPos: [0,.5], width: 100	},
		{content: "Bottom left" , xyPos: [0,0], width: 100	},
		{content: "top middle", xyPos: [.5,1], width: 100	},
		{content:"center", xyPos: [.5,.5], width: 100	},
		{content: "bottom middle", xyPos: [.5,0], width: 100	},
		{content: "TOP right", xyPos: [1,1], width: 50	},
		{content: "middle right", xyPos: [1,0.5], width: 50	},
		{content: "width 50 at 1/4,1/4", xyPos: [0.25,0.25], width: 50	},
		{content: "width 150 at 3/4,3/4 with extended &copy; chars", xyPos: [0.75,0.75], width: 150},
		{content: '3/4,1/4 with forn fields <input type="range" min="0" max="2.5" />', 
			xyPos: [0.75,0.25], width: 150},
		{content: "with bullet", xyPos: [0.25,0.75], width: 80, bullet: "circle"}		
		]
	});
	
	
	
	//	<div id="widgetTarget80"><p>5. labels fire callouts (events)</p></div>
	var svg5 = new MakeSVGContainer(
		{node: d3.select("#Endocrine"),
		maxWid: 550,
		maxHt:680
		}
	);
	svg5.Axes({
		xPosPerc: 0, yPosPerc:0, //top, left corner
		xPerc:1, yPerc: 1,//full height and width
		xaxisType: "linear",
		xOrient: "bottom",
		xTicks: 5,
		xLabel: "caption",
		yaxisType: "linear",
		yTicks: 5,
		yOrient: "left",
	});
	
	
	svg5.ScalableImage(
		{images: [
				{URI:'img/endocrineSystem.jpg', caption: "Human Glands"}
				]});
	
	svg5.Labels(
		{labels: 	
		  [
		{content: "Hypothalamus", xyPos: [0,1], width: 100	},
		{key: "Pituitary", content: "Pituitary gland" , xyPos: [0,.8], width: 80	},
		{key: "Pineal", content: "Pineal gland (epiphysis)", xyPos: [.15,.75], width: 100	},
		{key: "Thyroid", content: "Thyroid gland", xyPos: [.5,.98], width: 100},
		{key: "Parathyroid", content: "Parathyroid gland", xyPos: [.8,.9], width: 90},
		{key: "Adrenal", content: "Adrenal (surparenal)", xyPos: [.85,.8], width: 80},
		{key: "Pancreas", content: "Pancreas", xyPos: [.85,.52], width: 100},
		{key: "Ovaries", content: "Ovaries", xyPos: [.65,.38], width: 70},
		{key: "Testes", content: "Testicles", xyPos: [.7,.02], width: 70}
		]
	}, eventManager);
	

	var endoCallouts = new Callouts ({
		node: d3.select("#endoCall"),
		textBits: [ 
	{key: "Adrenal",
	 content: "Conserves sodium and encourages water retention, which increases blood pressure."
	 },
	 {key: "Testes",
	  content: "Group of hormones responsible for male sexual characteristics.  Testosterone is the principal androgen."
	 },
	 {key: "Thyroid",
	 content: "Reduces calcium levels in blood and regulates metabolism."
	 },
	 {key: "Placenta",
	 content: "Acts as a temporary endocrine gland by secreting chorionic gonadotropin, which signals the womanâ€™s ovaries to continue producing progesterone.  Without this signal, the lining of the uterus would be shed during the menstrual cycle and the pregnancy would be terminated. *The placenta is not a gland but produces hormones."
	 },
	 {key: "Adrenal gland",
	 content: "Related to stress response - increases blood glucose levels, suppresses the immune system, and aids metabolism."
	 },
	 {key: "Ovaries",
   	  content: "Group of hormones responsible for female sex characteristics."
	 },
	 {key: "Stomach",
	 content: "Stimulates the production of hydrochloric acid and pepsin - necessary for normal food digestion. *Stomach lining is not a gland but produces hormones."
	 },
	 {key: "Pancreas",
	 content: "Raises glucose levels in the blood by triggering the liver to convert stored glycogen to glucose."
	 },
	 {key: "Pancreas",
	 content: "Lowers glucose levels in the blood by encouraging cells to take in glucose from the blood."
	 },
	 {key: "Pineal gland",
	 content: "Regulates sleep cycles and plays a role in the reproductive cycles of many animals, especially those that reproduce seasonally."
	 },
	 {key: "Adrenal gland",
 	 content:  "Part of the body's <i>fight-or-flight</i> response - increases blood pressure, blood flow to the brain, and releases stored glucose for quick energy."
	 },
	 {key: "Parathyroid",
 	 content:  "Increases calcium levels in the blood."
	 },
	 {key: "Ovaries",
 	 content: "The 'pregnancy' hormone - progesterone causes the uterine lining to thicken in preparation for pregnancy and maintains the uterine lining during pregnancy."
	 }
	 ] 
		});
	
//	<div id="lineMarks"><p>5. x-axis Line Markers</p></div>
	var svgMark = new MakeSVGContainer(
		{node: d3.select("#lineMarks"),
		maxWid: 500,
		maxHt: 400
		}
	);
	svgMark.Axes({
		xPosPerc: 0, yPosPerc:0, //top, left corner
		xPerc: 1, yPerc: 1,//full height and width
		Data: [birth,death],
		xaxisType: "linear",
		xTicks: 5,
		xOrient: "bottom",
		xLabel: "Time",
		yaxisType: "linear",
		yTicks: 4,
		yOrient: "left",
		yLabel: "Population"
	});
		
			
	svgMark.LineGraph(
		{Data: [birth,death],
			type: "lines+points"
		});

		
	svgMark.LineMarkers(
		{xMarks: [death[40],birth[5]]
		});
		
		

//	<div id="lineMarks"><p>6. x-axis Line Markers single data point</p></div>
	var svgMark1 = new MakeSVGContainer(
		{node: d3.select("#lineMarks1"),
		maxWid: 500,
		maxHt: 400
		}
	);
	svgMark1.Axes({
		xPosPerc: 0, yPosPerc:0, //top, left corner
		xPerc: 1, yPerc: 1,//full height and width
		Data: [birth,death],
		xaxisType: "linear",
		xTicks: 5,
		xOrient: "bottom",
		xLabel: "Time",
		yaxisType: "linear",
		yTicks: 4,
		yOrient: "left",
		yLabel: "Population"
	});
		
			
	svgMark1.LineGraph(
		{Data: [birth,death],
			type: "line"
		});

		
	svgMark1.LineMarkers(
		{xMarks: [{x: 8, label: "An early year"},{x: 20, label: "a later year"},{x: 45, label: "the latest year with a long description"}]
		});
		
		
//events
	
// Handle changes of the label selection
	eventManager.subscribe(svg5.selectedEventId,
						   handleSelectionChanged);

//Test: set the start highlight state of 0 index by calling the 
//handler with a hard-set index of 0.  This should result in the
//first label getting highlighted and the first callout being displayed.
	handleSelectionChanged({labelIndex: "Thyroid"});

	
		
	
/************************************************************************
* handleSelectionChanged                                            *//**
*
* handleInputValueChanged is called from the event handler for one of
* the input widgets when the user changes its value. It updates the
* given matching input widget's value to match the new value and then
* updates the bar chart.
*
* @param eventDetails			These are the keyed values returned by 
*								the event, in this case, a selection
*								(click).
*************************************************************************/
	function handleSelectionChanged(eventDetails)
	{
		//Handler needs to get written into each page, 
		//each widget will have it's own way of responding  
		//LabelLite should be a method of Labels, once Labels
		//is written as a constructor
		labelLite(svg5,eventDetails.labelIndex);
		endoCallouts.calloutSwap(eventDetails.labelIndex);
		
	}
</script>
</body>
</html>